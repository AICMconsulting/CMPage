---
import { getPostBySlug, getComments, addComment } from '../../db/blog.js';
import Layout from '../../layouts/Layout.astro';
import { format } from 'date-fns';
import { es } from 'date-fns/locale';

export async function getStaticPaths() {
  const posts = await getAllPosts();
  return posts.map((post) => ({
    params: { slug: post.Slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const comments = await getComments(post.Id);
---

<!-- Rest of the template remains the same, but use the database fields -->